# ì˜¤ë””ì˜¤ ì‹œìŠ¤í…œ ì™„ì „ ê°€ì´ë“œ

ì´ ë¬¸ì„œëŠ” í”„ë¡œì íŠ¸ì˜ ëª¨ë“  ì˜¤ë””ì˜¤ ê´€ë ¨ ê¸°ëŠ¥ì„ í†µí•©í•˜ì—¬ ì„¤ëª…í•©ë‹ˆë‹¤.

## ëª©ì°¨

1. [ì‹œìŠ¤í…œ ê°œìš”](#ì‹œìŠ¤í…œ-ê°œìš”)
2. [Virtual Particles ì‹œìŠ¤í…œ](#virtual-particles-ì‹œìŠ¤í…œ)
3. [ì‹¤ì œ íŒŒí‹°í´ ì—°ë™](#ì‹¤ì œ-íŒŒí‹°í´-ì—°ë™)
4. [ì‹œí€€ì„œ íŒ¨í„´ ì‹œìŠ¤í…œ](#ì‹œí€€ì„œ-íŒ¨í„´-ì‹œìŠ¤í…œ)
5. [ìŠ¤íŠ¸ë¦¼-ë…¸ë“œ ë§¤í•‘](#ìŠ¤íŠ¸ë¦¼-ë…¸ë“œ-ë§¤í•‘)
6. [Individual vs Global ì˜¤ë””ì˜¤](#individual-vs-global-ì˜¤ë””ì˜¤)
7. [ìŒì•… ì´ë¡  í†µí•©](#ìŒì•…-ì´ë¡ -í†µí•©)
8. [ì„±ëŠ¥ ìµœì í™”](#ì„±ëŠ¥-ìµœì í™”)
9. [NoiseCraft í†µí•©](#noisecraft-í†µí•©)

---

## ì‹œìŠ¤í…œ ê°œìš”

### ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ì‹¤ì œ ê²Œì„ íŒŒí‹°í´                  â”‚
â”‚    (GameState.players)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ ë™ê¸°í™”
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Virtual Particles                  â”‚
â”‚   (particle-system.js)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ ì‹ í˜¸ ìƒì„±
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Stream-Node Mapping                â”‚
â”‚   (mapping-preset-manager.js)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ íŒŒë¼ë¯¸í„° ë³€í™˜
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         NoiseCraft                      â”‚
â”‚   (embedded.html iframe)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì£¼ìš” ì»´í¬ë„ŒíŠ¸

1. **íŒŒí‹°í´ ì‹œìŠ¤í…œ**: Virtual/Real íŒŒí‹°í´ ê´€ë¦¬
2. **ì‹œí€€ì„œ ë¡œì§**: íŒ¨í„´ ìƒì„± ë° ì—…ë°ì´íŠ¸
3. **íŒ¨í„´ ìƒì„±ê¸°**: ê³ ìœ  íŒ¨í„´ ë¶€ì—¬
4. **ë§¤í•‘ ê´€ë¦¬ì**: ìŠ¤íŠ¸ë¦¼-ë…¸ë“œ ë§¤í•‘
5. **íŒŒì¼ ê´€ë¦¬ì**: Individual/Global `.ncft` íŒŒì¼ ê´€ë¦¬

---

## Virtual Particles ì‹œìŠ¤í…œ

### ê°œìš”

Virtual ParticlesëŠ” í…ŒìŠ¤íŠ¸ ë° ì‹œë®¬ë ˆì´ì…˜ì„ ìœ„í•œ ê°€ìƒ íŒŒí‹°í´ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

**íŒŒì¼**: `noisecraft/public/particle-system.js`

### ì£¼ìš” ê¸°ëŠ¥

- **íŒŒí‹°í´ ìƒì„±/ê´€ë¦¬**: ìœ„ì¹˜, ì†ë„, ì§ˆëŸ‰ ê´€ë¦¬
- **ì¤‘ë ¥ ê³„ì‚°**: F = G Ã— mâ‚ Ã— mâ‚‚ / rÂ²
- **ì‹ í˜¸ ìƒì„±**: attraction, velocity, distance ë“±
- **ìƒí˜¸ì‘ìš© ê°ì§€**: inner/outer radius ê¸°ë°˜

### ì‚¬ìš© ì˜ˆì‹œ

```javascript
import { ParticleSystem } from '/public/particle-system.js';

const particleSystem = new ParticleSystem({
  innerRadius: 80,
  outerRadius: 150,
  G: 500,
  minDistance: 3
});

// íŒŒí‹°í´ ìƒì„±
const particle = particleSystem.addParticle(0, 500, 500, 0, 100);

// ì‹ í˜¸ ìƒì„±
const signals = particleSystem.signalGenerator.generateSignals(particle);
// { attraction, velocity, distance, closingSpeed, isInner, isOuter }
```

### ì‹ í˜¸ íƒ€ì…

1. **attraction**: ì¤‘ë ¥ ê¸°ë°˜ ê·¼ì ‘ë„ (0-1)
2. **velocity**: íŒŒí‹°í´ ì†ë„ (0-1)
3. **distance**: ê±°ë¦¬ (í”½ì…€)
4. **closingSpeed**: ì ‘ê·¼ ì†ë„ (0-1)
5. **isInner**: Inner radius ë‚´ ì—¬ë¶€ (0 ë˜ëŠ” 1)
6. **isOuter**: Outer radius ë‚´ ì—¬ë¶€ (0 ë˜ëŠ” 1)

---

## ì‹¤ì œ íŒŒí‹°í´ ì—°ë™

### ê°œìš”

ì‹¤ì œ ê²Œì„ íŒŒí‹°í´(`GameState.players`)ì„ Virtual Particlesë¡œ ë™ê¸°í™”í•˜ì—¬ ì˜¤ë””ì˜¤ ì‹œìŠ¤í…œì— ì‚¬ìš©í•©ë‹ˆë‹¤.

**ì°¸ê³ **: `docs/VIRTUAL_TO_REAL_PARTICLES_INTEGRATION.md` ì°¸ì¡°

### ë™ê¸°í™” ë°©ë²•

```typescript
// ì‹¤ì œ íŒŒí‹°í´ â†’ Virtual Particles
const particleSync = new ParticleSync();
particleSync.syncFromGameState(gameState);

// Virtual Particlesì—ì„œ ì˜¤ë””ì˜¤ íŒŒë¼ë¯¸í„° ìƒì„±
const virtualGenerator = particleSync.getVirtualGenerator();
const params = virtualGenerator.generateParams(`player-${selfId}`);
```

### ì£¼ìš” ê³ ë ¤ì‚¬í•­

- **ì„±ëŠ¥**: Throttlingìœ¼ë¡œ ì—…ë°ì´íŠ¸ ë¹ˆë„ ì œí•œ
- **íŒ¨í„´ ì˜êµ¬ ì €ì¥**: ì„œë²„ì— ì €ì¥í•˜ì—¬ ì¬ì ‘ì† ì‹œ ìœ ì§€
- **ë³€ê²½ ê°ì§€**: ì‹¤ì œë¡œ ë³€ê²½ëœ íŒŒí‹°í´ë§Œ ì—…ë°ì´íŠ¸

---

## ì‹œí€€ì„œ íŒ¨í„´ ì‹œìŠ¤í…œ

### ê°œìš”

ê° íŒŒí‹°í´/í”Œë ˆì´ì–´ì—ê²Œ ê³ ìœ í•œ ì‹œí€€ì„œ íŒ¨í„´ì„ ë¶€ì—¬í•˜ê³ , ìƒí˜¸ì‘ìš© ì‹œ í™”ìŒ ìƒì„±.

**íŒŒì¼**: `noisecraft/public/sequencer-logic.js`, `sequencer-pattern-generator.js`

### íŒ¨í„´ êµ¬ì¡°

#### 12-tone Chromatic Pattern
```javascript
// ê° íŒŒí‹°í´ì˜ ê³ ìœ  íŒ¨í„´ (12ê°œ ìš”ì†Œ)
[1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]  // C (note 0)
[0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0]  // D# (note 2)
```

#### 4-row Sequencer Pattern (Individual Audio)
```javascript
{
  bass: [1, 0, 0, 0],      // Self particle
  baritone: [0, 1, 0, 0],  // First inner particle
  tenor: [0, 0, 1, 0]      // Second inner particle
}
```

### íŒ¨í„´ ìƒì„± ë¡œì§

#### 1. ê³ ìœ  íŒ¨í„´ ë¶€ì—¬
```javascript
const patternGen = createPatternGenerator();
const pattern = patternGen.generateUniquePattern(
  particleId,
  'C Pentatonic Major',
  existingPatterns
);
```

#### 2. Individual íŒ¨í„´ ìƒì„±
```javascript
const sequencerLogic = new SequencerLogic();
const pattern = sequencerLogic.generateIndividualPattern(
  selfParticle,
  innerParticles  // Inner radius ë‚´ì˜ íŒŒí‹°í´ë“¤
);
```

### ë™ì‘ ë°©ì‹

- **Alone**: bassë§Œ í™œì„± (ë‹¨ì¼ í†¤)
- **1 inner particle**: bass + baritone (2ìŒ í™”ìŒ)
- **2+ inner particles**: bass + baritone + tenor (3ìŒ í™”ìŒ)

### 12-tone â†’ 4-row ë§¤í•‘

```javascript
// 0-2 â†’ Row 0, 3-5 â†’ Row 1, 6-8 â†’ Row 2, 9-11 â†’ Row 3
map12ToneTo4Row(noteIndex12) {
  return Math.floor(noteIndex12 / 3);
}
```

---

## ìŠ¤íŠ¸ë¦¼-ë…¸ë“œ ë§¤í•‘

### ê°œìš”

Virtual Particlesì˜ ì‹ í˜¸ ìŠ¤íŠ¸ë¦¼ì„ NoiseCraft ë…¸ë“œ íŒŒë¼ë¯¸í„°ë¡œ ë³€í™˜.

**íŒŒì¼**: `noisecraft/public/test-workspace.html` (StreamNodeMapper í´ë˜ìŠ¤)

### ë§¤í•‘ êµ¬ì„±

```javascript
{
  id: "mapping-123",
  nodeId: "211",           // NoiseCraft ë…¸ë“œ ID
  paramName: "value",      // íŒŒë¼ë¯¸í„° ì´ë¦„
  operation: "none",       // ìˆ˜í•™ ì—°ì‚°
  enabled: true,
  streams: [{
    stream: "attraction",
    interpolation: "linear",  // linear, logarithmic, exponential
    inputMin: 0,
    inputMax: 1,
    outputMin: 0,
    outputMax: 0.1
  }]
}
```

### ìˆ˜í•™ ì—°ì‚°

- **none**: ì²« ë²ˆì§¸ ìŠ¤íŠ¸ë¦¼ë§Œ ì‚¬ìš©
- **add**: ëª¨ë“  ìŠ¤íŠ¸ë¦¼ í•©ì‚°
- **multiply**: ëª¨ë“  ìŠ¤íŠ¸ë¦¼ ê³±ì…ˆ
- **min/max**: ìµœì†Œ/ìµœëŒ€ê°’
- **average**: í‰ê· 

### ë³´ê°„ ëª¨ë“œ

- **linear**: ì„ í˜• ë§¤í•‘
- **logarithmic**: ë¡œê·¸ ê³¡ì„  (ë‚®ì€ ê°’ì— ë¯¼ê°)
- **exponential**: ì§€ìˆ˜ ê³¡ì„  (ë†’ì€ ê°’ì— ë¯¼ê°)

### í”„ë¦¬ì…‹ ê´€ë¦¬

```javascript
const mappingManager = createMappingPresetManager({
  storageKey: 'noisecraftIndividualMappings'
});

// í”„ë¦¬ì…‹ ì €ì¥
mappingManager.savePreset('default', 'Default mapping');

// í”„ë¦¬ì…‹ ë¶ˆëŸ¬ì˜¤ê¸°
mappingManager.loadPreset('default');

// JSON íŒŒì¼ë¡œ ë‚´ë³´ë‚´ê¸°/ê°€ì ¸ì˜¤ê¸°
mappingManager.exportMappings('mappings.json');
await mappingManager.importMappings(file);
```

---

## Individual vs Global ì˜¤ë””ì˜¤

### Individual Audio (ê°œë³„ ì˜¤ë””ì˜¤)

**ëª©ì **: ê° ì‚¬ìš©ìê°€ ìì‹ ì˜ ì˜¤ë””ì˜¤ë§Œ ë“£ìŒ

**íŠ¹ì§•**:
- ìì‹ ì˜ íŒŒí‹°í´ + Inner radius ë‚´ íŒŒí‹°í´ë“¤ì˜ í™”ìŒ
- ê³µê°„í™” (panning, distance-based gain)
- ì‹¤ì‹œê°„ ìƒí˜¸ì‘ìš© ë°˜ì˜

**íŒŒì¼**: `indiv_audio_map.ncft`

**ì‹œí€€ì„œ ë…¸ë“œ**:
- Bass (211): ìì‹ ì˜ ë…¸íŠ¸
- Baritone (212): ì²« ë²ˆì§¸ inner íŒŒí‹°í´
- Tenor (213): ë‘ ë²ˆì§¸ inner íŒŒí‹°í´

### Global Audio (ê¸€ë¡œë²Œ ì˜¤ë””ì˜¤)

**ëª©ì **: ëª¨ë“  í”Œë ˆì´ì–´ì˜ ì˜¤ë””ì˜¤ë¥¼ í•©ì„±í•˜ì—¬ ê´€ê°ì—ê²Œ ì œê³µ

**íŠ¹ì§•**:
- ëª¨ë“  íŒŒí‹°í´ì˜ íŒ¨í„´ í¬í•¨
- í™”ìŒ ì§„í–‰ (chord progression)
- í´ëŸ¬ìŠ¤í„° ê¸°ë°˜ ì˜¤ë””ì˜¤

**íŒŒì¼**: `global_audio_map.ncft` (Individualì—ì„œ ìë™ ë³µì‚¬)

### íŒŒì¼ ê´€ë¦¬

```javascript
const fileManager = createNcftFileManager({
  basePath: '/public/examples',
  individualFile: 'indiv_audio_map.ncft',
  globalFile: 'global_audio_map.ncft'
});

// Individual ì´ˆê¸°í™”
await fileManager.initializeIndividual('individual-iframe');

// Global ì´ˆê¸°í™” (ì—†ìœ¼ë©´ Individualì—ì„œ ë³µì‚¬)
await fileManager.initializeGlobal('global-iframe');
```

---

## ìŒì•… ì´ë¡  í†µí•©

### ì‚¬ìš© ê°€ëŠ¥í•œ ìŠ¤ì¼€ì¼

- **Major Scales**: C, D, E, F, G, A
- **Minor Scales**: A Minor, E Minor, D Minor
- **Pentatonic Scales**: ë§¤ìš° ì¡°í™”ë¡œì›€ (ê¸°ë³¸ ì„ íƒ)
- **Blues Scale**: ë” í‘œí˜„ë ¥ ìˆëŠ” íŒ¨í„´
- **Chromatic**: ì™„ì „í•œ ìœ ì—°ì„± (ëœ ì¡°í™”ë¡œì›€)

### íŒ¨í„´ ìƒì„± í•¨ìˆ˜

#### 1. ì¡°í™”ë¡œìš´ íŒ¨í„´ ìƒì„±
```javascript
const pattern = generateHarmoniousPattern(
  'C Pentatonic Major',
  null,  // chord (optional)
  12     // numNotes
);
```

#### 2. ì¡°í™”í™” íŒ¨í„´ ìƒì„±
```javascript
const pattern = generateHarmonizingPattern(
  [existingPattern1, existingPattern2],
  'C Pentatonic Major'
);
```

#### 3. í™”ìŒ íŒ¨í„´ ìƒì„±
```javascript
const patterns = generateChordPatterns(
  'C Major',  // chord name
  3            // numPatterns
);
```

### Tonal.js í†µí•© (ê¶Œì¥)

```bash
npm install @tonaljs/tonal
```

```javascript
import { Progression, Chord, Scale } from '@tonaljs/tonal';

// í™”ìŒ ì§„í–‰ ìƒì„±
const progression = Progression.fromRomanNumerals('C major', ['I', 'V', 'vi', 'IV']);

// í™”ìŒ í†¤ ê°€ì ¸ì˜¤ê¸°
const chord = Chord.get('CM');
// { notes: ['C', 'E', 'G'], ... }
```

**ì°¸ê³ **: `docs/JAVASCRIPT_MUSIC_THEORY_LIBRARIES.md` ì°¸ì¡°

---

## ì„±ëŠ¥ ìµœì í™”

### Throttling

```javascript
const SIGNAL_UPDATE_INTERVAL = 16;   // ~60fps (ì‹ í˜¸ ì—…ë°ì´íŠ¸)
const PARAM_UPDATE_INTERVAL = 33;    // ~30fps (íŒŒë¼ë¯¸í„° ì—…ë°ì´íŠ¸)
const SEQUENCER_UPDATE_THROTTLE = 100; // 10fps (ì‹œí€€ì„œ ì—…ë°ì´íŠ¸)
```

### ìµœì í™” ê¸°ë²•

1. **ë³€ê²½ ê°ì§€**: ì‹¤ì œë¡œ ë³€ê²½ëœ íŒŒí‹°í´ë§Œ ì—…ë°ì´íŠ¸
2. **ë°°ì¹˜ ì²˜ë¦¬**: ì—¬ëŸ¬ íŒŒë¼ë¯¸í„°ë¥¼ í•œ ë²ˆì— ì „ì†¡
3. **requestAnimationFrame**: DOM ì—…ë°ì´íŠ¸ ë°°ì¹˜
4. **íŒŒë¼ë¯¸í„° ìŠ¤ë¬´ë”©**: ê¸‰ê²©í•œ ë³€í™” ë°©ì§€

### íŒŒë¼ë¯¸í„° ìŠ¤ë¬´ë”©

```javascript
// ë³¼ë¥¨ íŒŒë¼ë¯¸í„°ëŠ” ë§¤ìš° ëŠë¦° ìŠ¤ë¬´ë”© (í´ë¦­ ë°©ì§€)
const VOLUME_SMOOTHING_FACTOR = 0.015;
const DEFAULT_SMOOTHING_FACTOR = 0.1;
```

**ì°¸ê³ **: `docs/PERFORMANCE_AND_MUSIC_THEORY_OPTIMIZATIONS.md` ì°¸ì¡°

---

## NoiseCraft í†µí•©

### iframe í†µì‹ 

```javascript
// íŒŒë¼ë¯¸í„° ì„¤ì •
iframe.contentWindow.postMessage({
  type: "noiseCraft:setParam",
  nodeId: "211",
  paramName: "value",
  value: 0.5
}, "*");

// ì‹œí€€ì„œ íŒ¨í„´ ì—…ë°ì´íŠ¸
iframe.contentWindow.postMessage({
  type: "noiseCraft:toggleCell",
  nodeId: "211",
  patIdx: 0,
  stepIdx: 0,
  rowIdx: 2,
  value: 1
}, "*");
```

### ì£¼ìš” ë…¸ë“œ (indiv_audio_map.ncft)

- **211**: MonoSeq "bass"
- **212**: MonoSeq "baritone"
- **213**: MonoSeq "tenor"
- **206**: Knob "fact" (detune)
- **183**: Knob "Vol CHORDS"
- **17**: Knob "%" (probability)
- **70**: Knob "vol" (master volume)

### Auto-save

```javascript
iframe.contentWindow.postMessage({
  type: "noiseCraft:enableAutoSave",
  enabled: true,
  filename: "indiv_audio_map.ncft"
}, "*");
```

---

## ì£¼ìš” íŒŒì¼ êµ¬ì¡°

```
noisecraft/public/
â”œâ”€â”€ particle-system.js              # Virtual Particles
â”œâ”€â”€ sequencer-logic.js              # ì‹œí€€ì„œ íŒ¨í„´ ìƒì„±
â”œâ”€â”€ sequencer-pattern-generator.js  # ê³ ìœ  íŒ¨í„´ ë¶€ì—¬
â”œâ”€â”€ ncft-file-manager.js            # íŒŒì¼ ê´€ë¦¬
â”œâ”€â”€ mapping-preset-manager.js       # ë§¤í•‘ í”„ë¦¬ì…‹
â”œâ”€â”€ music-theory.js                 # ìŒì•… ì´ë¡  í•¨ìˆ˜
â””â”€â”€ test-workspace.html             # í…ŒìŠ¤íŠ¸ ì›Œí¬ìŠ¤í˜ì´ìŠ¤

src/lib/audio/
â”œâ”€â”€ virtualSignals.ts               # Virtual ì‹ í˜¸ ìƒì„±
â”œâ”€â”€ nodeMapper.ts                    # ë…¸ë“œ ë§¤í•‘
â”œâ”€â”€ noiseCraft.ts                    # NoiseCraft í†µì‹ 
â””â”€â”€ example-usage.ts                 # ì‚¬ìš© ì˜ˆì‹œ

src/lib/game/
â”œâ”€â”€ state.ts                         # ê²Œì„ ìƒíƒœ (ì‹¤ì œ íŒŒí‹°í´)
â””â”€â”€ hooks.ts                         # React í›…

docs/
â”œâ”€â”€ AUDIO_SYSTEM_COMPLETE.md         # ì´ ë¬¸ì„œ
â”œâ”€â”€ VIRTUAL_TO_REAL_PARTICLES_INTEGRATION.md  # ì—°ë™ ê°€ì´ë“œ
â””â”€â”€ FILE_ARCHITECTURE.md             # íŒŒì¼ êµ¬ì¡°
```

---

## ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ

### 1. Virtual Particles í…ŒìŠ¤íŠ¸

```bash
# NoiseCraft ì„œë²„ ì‹¤í–‰
cd noisecraft && npm start

# ë¸Œë¼ìš°ì €ì—ì„œ ì—´ê¸°
open http://localhost:3001/public/test-workspace.html
```

### 2. ì‹¤ì œ íŒŒí‹°í´ ì—°ë™

```typescript
// MobileView.tsxì— ì¶”ê°€
import { ParticleSync } from '@/lib/audio/particle-sync';

const particleSync = new ParticleSync();
particleSync.syncFromGameState(gameState);
```

### 3. ë§¤í•‘ ì„¤ì •

1. `test-workspace.html`ì˜ "Mappings" íƒ­ ì—´ê¸°
2. "+ Add Mapping" í´ë¦­
3. ë…¸ë“œ ì„ íƒ ë° ìŠ¤íŠ¸ë¦¼ ì„¤ì •
4. "ğŸ“¥ Export"ë¡œ ì €ì¥

### 4. ì‹œí€€ì„œ íŒ¨í„´ í™•ì¸

- ê° íŒŒí‹°í´ì˜ ê³ ìœ  íŒ¨í„´: `particle.sequencerPattern`
- í™œì„± ë…¸íŠ¸ ì¸ë±ìŠ¤: `particle.getActiveNoteIndex()`
- Individual íŒ¨í„´: `sequencerLogic.generateIndividualPattern()`

---

## ë¬¸ì œ í•´ê²°

### ì‹œí€€ì„œê°€ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŒ

- Inner particles ë³€ê²½ ê°ì§€ í™•ì¸
- `updateMonoSeqSequencer()` í˜¸ì¶œ í™•ì¸
- iframe ë©”ì‹œì§€ ì „ì†¡ í™•ì¸

### ì˜¤ë””ì˜¤ê°€ ëŠê¹€

- íŒŒë¼ë¯¸í„° ìŠ¤ë¬´ë”© í™•ì¸
- Throttling ê°„ê²© ì¡°ì •
- Gate time ì¦ê°€ (0.3-0.5ì´ˆ)

### íŒ¨í„´ì´ í•­ìƒ ê°™ìŒ

- ìŠ¤ì¼€ì¼ ë‹¤ì–‘ì„± ì¦ê°€ (Pentatonic â†’ Major/Minor)
- íŒ¨í„´ ìƒì„± ì‹œ ëœë¤ ì‹œë“œ ì¶”ê°€
- Tonal.js í†µí•© ê³ ë ¤

---

## ì°¸ê³  ë¬¸ì„œ

- `docs/VIRTUAL_TO_REAL_PARTICLES_INTEGRATION.md`: ì‹¤ì œ íŒŒí‹°í´ ì—°ë™ ê°€ì´ë“œ
- `docs/FILE_ARCHITECTURE.md`: íŒŒì¼ë³„ ì—­í•  ë° ì—°ê²° ê´€ê³„
- `docs/REAL_PARTICLES_ARCHITECTURE.md`: ì‹¤ì œ íŒŒí‹°í´ ê´€ë¦¬ êµ¬ì¡°
- `docs/MODULE_ARCHITECTURE.md`: ëª¨ë“ˆ ì•„í‚¤í…ì²˜

---

ì´ ë¬¸ì„œëŠ” ëª¨ë“  ì˜¤ë””ì˜¤ ê´€ë ¨ ê¸°ëŠ¥ì„ í†µí•©í•˜ì—¬ ì œê³µí•©ë‹ˆë‹¤. íŠ¹ì • ê¸°ëŠ¥ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ í•´ë‹¹ ì„¹ì…˜ì„ ì°¸ì¡°í•˜ì„¸ìš”.

